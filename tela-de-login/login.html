<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HelpUP - Entrar</title>
    <link href="https://unpkg.com/tailwindcss@1.9.0/dist/tailwind.min.css" rel="stylesheet">
    <style>
    .login{
      background-color: white;
      background-repeat: no-repeat;
      background-size: cover;
      width: 100%;
    }
    </style>
</head>
<body class="h-screen overflow-hidden flex items-center justify-center" style="background: #edf2f7;">
  <!-- This is an example component -->
  <div class="h-screen font-sans login bg-cover">
  <div class="container mx-auto h-full flex flex-1 justify-center items-center">
      <div class="w-full max-w-lg">
        <div class="leading-loose">
          <form id="login-form" class="max-w-sm m-4 p-10 bg-white bg-opacity-25 rounded shadow-xl">
              <p class="text-black font-medium text-center text-lg font-bold">LOGIN</p>

                <div class="mt-2">
                  <label class="block text-sm text-black" for="email">E-mail</label>
                  <input 
                    class="w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white" 
                    id="email" 
                    type="email" 
                    name="email" 
                    aria-label="email" 
                    placeholder="Digite o e-mail" 
                    required>
                </div>

                <div class="mt-2">
                  <label class="block  text-sm text-black">Senha</label>
                  <input 
                    class="w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white" 
                    id="password" 
                    type="password" 
                    name="password" 
                    placeholder="Digite a sua senha" 
                    aria-label="password" 
                    required>
                </div>

                <div class="mt-4 items-center flex justify-between">
                  <button class="px-4 py-1 text-white font-light tracking-wider bg-gray-900 hover:bg-gray-800 rounded"
                    type="submit">Entrar</button>
                  <a class="inline-block right-0 align-baseline font-bold text-sm text-500 text-black hover:text-orange-400"
                    href="#">Esqueceu a senha ?</a>
                </div>

                <div class="text-center">
                  <a href="registro.html" class="inline-block right-0 align-baseline font-light text-sm text-500 hover:text-orange-400">
                      Criar uma conta
                  </a>
                </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <script src="../js/crud.js"></script>
  <script>
    (() => {
      window.addEventListener('load', (e) => {
        const isLogged = localStorage.getItem('logged');
      
        if (isLogged === 'true') 
          window.location.href = '/';
        return null
      })
    })()

    document.getElementById('login-form').addEventListener('submit', (e) => {
      e.preventDefault();

      const email = document.getElementById('email');
      const passw = document.getElementById('password');

      const isAuth = auth(email.value, passw.value);
      if (isAuth.status === 403) return alert(isAuth.message);
      
      alert(`Bem vindo (a) de volta ${isAuth.user.name}!`);
      window.location.href = "/index.html"      
    })    
  </script>
</body>
</html>
