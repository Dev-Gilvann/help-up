
<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HelpUP - Registre-se</title>
    <link href="https://unpkg.com/tailwindcss@1.9.0/dist/tailwind.min.css" rel="stylesheet">
    <style>
    .login{
      background-color: white;
      background-repeat: no-repeat;
      background-size: cover;
      width: 100%;
    }
    </style>
</head>
<body class="h-screen overflow-hidden flex items-center justify-center" style="background: #edf2f7;">
    <!-- This is an example component -->
<div class="h-screen font-sans login bg-cover">
<div class="container mx-auto h-full flex flex-1 justify-center items-center">
    <div class="w-full max-w-lg">
      <div class="leading-loose">
        <form id="form-register" class="max-w-sm m-4 p-10 bg-white bg-opacity-25 rounded shadow-xl">
          <p class="text-black font-medium text-center text-lg font-bold">REGISTRAR</p>
              <div class="mt-2">
                <label class="block text-sm text-black" for="email">E-mail</label>
                <input 
                  class="w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white" 
                  id="email"
                  type="email"
                  name="email"
                  placeholder="Digite o e-mail"
                  required>
              </div>
              <div class="mt-2">
                <label class="block text-sm text-black" for="confiemail">Confirmar Email</label>
                <input 
                  class="w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white" 
                  id="confirm_email" 
                  type="email" 
                  name="confirm_email" 
                  placeholder="Digite Novamente" 
                  required>
              </div>
              <div class="mt-2">
                <label class="block text-sm text-black" for="Nome">Nome</label>
                <input 
                  class="w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white" 
                  id="name" 
                  type="name" 
                  name="name" 
                  placeholder="Digite o seu nome completo" 
                  required>
              </div>
              <div class="mt-2">
                <label class="block text-sm text-black" for="telefone">Número de Telefone</label>
                <input 
                  class="w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white" 
                  id="telefone" 
                  type="telefone" 
                  name="telefone" 
                  placeholder="Digite o seu número" 
                  required>
              </div>
              <div class="mt-2">
                <label class="block  text-sm text-black">Senha</label>               
                 <input 
                  class="w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white"
                  id="password" 
                  type="password" 
                  name="password"
                  placeholder="Digite a sua senha" 
                  required>
              </div>
              <div class="mt-2">
                <label class="block  text-sm text-black">Repetir a senha</label>                
                <input 
                  class="w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white"
                  id="repeat_password" 
                  type="password" 
                  name="repeat_password" 
                  placeholder="Confirme sua senha"
                  required>
              </div>
              <div class="mt-4 flex justify-center">
                <button 
                  class="px-4 py-1 text-white font-light tracking-wider bg-gray-900 hover:bg-gray-800 rounded"
                  type="submit"
                >Criar conta</button>
              </div>
              <div class="text-center ">
                <a 
                  class="inline-block right-0 align-baseline font-light text-sm text-500 hover:text-orange-400"
                  href="login.html" 
                >Já é usuário? Entre aqui.</a>
              </div>
        </form>
      </div>
    </div>
  </div>
</div>
<script src="../js/crud.js"></script>
<script>
  (() => {
    window.addEventListener('load', (e) => {
      const isLogged = localStorage.getItem('logged');
    
      if (isLogged === 'true') 
        window.location.href = '/';
      return null
    })
  })()
  
  document.getElementById('form-register').addEventListener('submit', (e) => {
    e.preventDefault();

    const name = document.getElementById("name");
    const email = document.getElementById("email");
    const telefone = document.getElementById("telefone");
    const password = document.getElementById("password");
    
    const confirm_email = document.getElementById("confirm_email");
    const repeat_password = document.getElementById("repeat_password");
    
    if (email.value !== confirm_email.value) {
      confirm_email.value = "";
      return alert('Os e-mails não coincidem!');
    }
    
    if (password.value !== repeat_password.value) {
      repeat_password.value = "";
      return alert('As senhas não coincidem!')
    };
    
    const newData = setUser({ 
      name: name.value, 
      email: email.value, 
      telefone: telefone.value, 
      password: password.value 
    });
    
    if (newData.status === 201) {
      alert('Usuário registrado com sucesso!')
      window.location.href = "/help-up/tela-de-login/login.html"
      return null
    }

    alert(JSON.stringify(newData, null, 2))      
  })
</script>
</body>
</html>
